<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.epi.datasource.dao.FDatabaseDao">

	<sql id="dsColumns">
		a.data_resource_id as "id",
		a.data_resource_name as
		"data_resource_name",
		a.data_type as "data_type",
		a.operator_name as
		"operator_name",
		a.operator_date as "operator_date",
		a.state as "state",
		a.IP as "IP",
		a.port as "port",
		a.userid as "userid",
		a.password as
		"password",
		a.SID as "SID",
		a.data_name as "data_name"
		a.cache_time as
		"cache_time"
		a.cache_date as "cache_date"
	</sql>
	<resultMap type="cn.epi.datasource.entity.FileSource" id="TableResultMap">
		<id column="data_resource_id" property="data_resource_id" />
		<result column="data_resource_name" property="data_resource_name" />
		<result column="data_type" property="data_type" />
	</resultMap>
	<resultMap type="cn.epi.datasource.entity.FileSource" id="DescResultMap">
	    <id column="data_resource_id" property="data_resource_id" />
		<result column="data_resource_name" property="data_resource_name" />
		<result column="data_type" property="data_type" />
		<result column="port" property="port" />
		<result column="userid" property="userid" />
		<result column="SID" property="SID" />
		<result column="data_name" property="data_name" />
		<result column="cache_time" property="cache_time" />
		<result column="cache_date" property="cache_date" />
		<result column="csv_separator" property="csv_separator" />
		<result column="with_header" property="with_header" />
	</resultMap>
	<resultMap type="cn.epi.datasource.entity.FileSource" id="AllResultMap">
		<result column="data_type" property="data_type" />
		<result column="IP" property="IP" />
		<result column="port" property="port" />
		<result column="userid" property="userid" />
		<result column="password" property="password" />
		<result column="SID" property="SID" />
		<result column="data_name" property="data_name" />
	</resultMap>
	<!-- <select id="get" resultType="cn.epi.datasource.entity.DataSourceEntity"> -->
	<!-- SELECT -->
	<!-- <include refid="dsColumns" /> -->
	<!-- FROM EPI_DATA_SOURCE a -->
	<!-- WHERE a.id = #{id} -->
	<!-- </select> -->

	<select id="get" resultType="cn.epi.datasource.entity.FileSource">
		SELECT
		<include refid="dsColumns" />
		FROM sjlj_dataresource a
		WHERE 0=0 and a.id = #{id}
	</select>

	<select id="findListName" resultMap="TableResultMap">
		SELECT
		data_resource_id,data_resource_name,data_type
		FROM sjlj_dataresource a order by data_resource_id desc 
	</select>
	<select id="findDesc" resultMap="DescResultMap">
		SELECT
		data_resource_id,data_resource_name,data_type,IP,port,userid,SID,data_name,cache_time,cache_date,csv_separator,with_header
		FROM sjlj_dataresource a where data_resource_id=#{data_resource_id}
	</select>
	<select id="findAll" resultMap="AllResultMap">
		SELECT
		data_type,IP,port,userid,password,SID,data_name
		FROM sjlj_dataresource
		a where data_resource_id=#{data_resource_id}
	</select>
<select id="findID" resultType="int">
		SELECT
		data_resource_id
		FROM sjlj_dataresource
		a where data_resource_name=#{data_resource_name}
	</select>


	<insert id="insert">
		insert into sjlj_dataresource
		(data_resource_id,data_resource_name,data_type,operator_name,operator_date,state,IP,port,userid,password,SID,data_name,cache_time,cache_date,csv_separator,with_header)
		values(#{data_resource_id},#{data_resource_name},#{data_type},#{operator_name},#{operator_date},#{state},#{IP},#{port},#{userid},#{password},#{SID},#{data_name},#{cache_time},#{cache_date},#{csv_separator},#{with_header})
	</insert>


	<update id="update">
		update sjlj_dataresource set
		data_resource_name=#{data_resource_name},data_type=#{data_type},operator_name=#{operator_name},operator_date=#{operator_date},state=#{state},IP=#{IP},port=#{port},userid=#{userid},password=#{password},SID=#{SID},data_name=#{data_name}
		where data_resource_id=#{data_resource_id}
	</update>
	<update id="updateFile">
		update sjlj_dataresource set
		data_resource_name=#{data_resource_name},data_type=#{data_type},operator_name=#{operator_name},operator_date=#{operator_date},state=#{state},IP=#{IP},data_name=#{data_name},csv_separator=#{csv_separator},with_header=#{with_header}
		where data_resource_id=#{data_resource_id}
	</update>
	<update id="changeName">
		update sjlj_dataresource set
		data_resource_name=#{data_resource_name}
		where data_resource_id=#{data_resource_id}
	</update>
	<delete id="delete">
		delete from sjlj_dataresource where
		data_resource_id=#{data_resource_id}
	</delete>

</mapper>